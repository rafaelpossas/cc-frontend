!function(){"use strict";angular.module("app",["app.core","app.widgets","app.layout","app.authentication"])}(),function(){"use strict";angular.module("app.authentication",[])}(),function(){"use strict";angular.module("app.layout",[])}(),function(){"use strict";angular.module("app.core",["ui.router","ngCookies","blocks.exception","blocks.logger","blocks.router","amalieiev.international"])}(),function(){"use strict";angular.module("app.widgets",[])}(),function(){"use strict";angular.module("blocks.logger",[])}(),function(){"use strict";angular.module("blocks.exception",["blocks.logger"])}(),function(){"use strict";angular.module("blocks.router",["ui.router","blocks.logger"])}(),function(){function n(n,r){n.$rootScope.locale=r.locale}angular.module("app").run(n),n.$inject=["common","$international"]}(),function(){"use strict";function n(n){function r(r){var o=n.$q.defer();return n.$http({method:"POST",url:n.endpoint.getApiUrl(e,!0)+"auth/user/local",data:{user_primary_email:r.username,password:r.password},headers:{Accept:"application/vnd.bs_authentication_cloud.v1+json"}}).then(function(n){o.resolve(n.data.response.result)},function(n){o.reject(n)}),o.promise}var e="authCloud",o={login:r};return o}angular.module("app.authentication").factory("authenticationRepository",n),n.$inject=["common"]}(),function(){"use strict";function n(n){n.configureRoutes(r())}function r(){return[{name:"login",config:{url:"/login",templateUrl:"app/authentication/login.html",controller:"Login"}}]}angular.module("app.authentication").run(n),n.$inject=["routehelper"]}(),function(){"use strict";function n(n,r,e,o){function t(){n.forgot=!1,n.showForget=function(r){return n.forgot=r,n.forgot},n.handleLoginSubmit=i}function i(n){r.login(n).then(function(r){return"y"!==r.is_authenticated_yn.toLowerCase()?o.logger.warning("Invalid username and/or password",n,"Login Error"):"y"===r.reset_needed_yn.toLowerCase()||"y"===r.locked_yn.toLowerCase()?o.logger.warning("Unable to login, user is locked",n,"Login Error"):(e.setupAuthentication(n.username,r.is_authenticated_yn,r.session_id),void o.$state.go("dashboard"))},function(n){})}var a=this;a.handleLoginSubmit=i,a.creds={username:"rafael"},t()}angular.module("app.authentication").controller("Login",n),n.$inject=["$scope","authenticationRepository","userData","common"]}(),function(){"use strict";function n(n){n.configureRoutes(r())}function r(){return[{name:"dashboard",config:{url:"/",templateUrl:"app/layout/dashboard.html",controller:"Dashboard"}}]}angular.module("app.layout").run(n),n.$inject=["routehelper"]}(),function(){"use strict";function n(){function n(){}n()}angular.module("app.layout").controller("Dashboard",n)}(),function(){"use strict";function n(n,r,e,o,t,i,a,s){function u(){return e.$broadcast.apply(e,arguments)}function c(n){return/^[-]?\d+$/.test(n)}function l(n,r){return n&&-1!==n.toLowerCase().indexOf(r.toLowerCase())}var d={$broadcast:u,$q:r,$timeout:o,$http:t,$state:s,$rootScope:e,$location:n,endpoint:a,logger:i,isNumber:c,textContains:l};return d}angular.module("app.core").factory("common",n),n.$inject=["$location","$q","$rootScope","$timeout","$http","logger","endpoint","$state"]}(),function(){"use strict";function n(n){n.options.timeOut=4e3,n.options.positionClass="toast-bottom-right"}function r(n,r,e,t,i,a){n.debugEnabled&&n.debugEnabled(!0),r.config({preferredLocale:o.locale,urlTemplate:"assets/i18n/{locale}/{part}.json"}),r.addPart("main"),t.config.$routeProvider=i,t.config.$urlRouterProvider=a,e.configure(o.appErrorPrefix)}var e=angular.module("app.core");e.config(n),n.$inject=["toastr"];var o={appErrorPrefix:"[Customer Compass Error] ",appTitle:"Customer Compass",version:"1.0.0",locale:"en-us",availableLanguages:{"en-us":"us","en-au":"au","zh-tw":"tw"},endpoints:{authCloud:{url:"/authentication_cloud/",accept:"application/vnd.bs_authentication_cloud.v1+json"},dashboard:{url:"/service-dashboard/"},esb:{url:"/api"},journeyExplorer:{url:"/journey_explorer/",accept:"application/vnd.bs_journey_explorer.v1+json"},metadata:{url:"/metadata_manager/"},modelledDatastore:{url:"/modelled_data_store"},paf:{url:"/paf_engine/"},permissions:{url:"/permissions_engine/"},query:{url:"/query_store/"},report:{url:"/report_engine/"},userManagement:{url:"/user_management/"},widget:{url:"/widget_designer/"}},currentUser:void 0};e.value("config",o),e.config(r),r.$inject=["$logProvider","$internationalProvider","exceptionHandlerProvider","routehelperConfigProvider","$stateProvider","$urlRouterProvider"]}(),function(){"use strict";angular.module("app.core").constant("baseurl","https://dev-001.c-scope.net").constant("toastr",toastr).constant("moment",moment)}(),function(){"use strict";function n(n,r){function e(e,o){return o?r+n.endpoints.esb.url+n.endpoints[e].url:r+n.endpoints[e].url}var o={getApiUrl:e};return o}angular.module("app.core").factory("endpoint",n),n.$inject=["config","baseurl"]}(),function(){"use strict";function n(n,r){function e(){return n.currentUser||(n.currentUser=r.getUserData()),n.currentUser&&"y"===n.currentUser.isAuthenticated?!0:!1}var o={isAuthenticated:e};return o}angular.module("app.core").factory("permissions",n),n.$inject=["config","userData"]}(),function(){"use strict";function n(n,r,e){function o(){n.remove("username"),n.remove("isAuthenticated"),n.remove("sessionId"),delete e.$http.defaults.headers.common.Token,r.currentUser=void 0}function t(){var r={username:n.get("username"),isAuthenticated:n.get("isAuthenticated"),sessionId:n.get("sessionId"),locale:n.get("locale")};return r}function i(r,o,i,a){return n.put("username",r),n.put("isAuthenticated",o),n.put("sessionId",i),n.put("locale",a),e.$http.defaults.headers.common.Token="MULESESSID="+i,t()}function a(n,e,o){r.currentUser=i(n,e,o,"en-use")}var s={wipeUserData:o,getUserData:t,setUserData:i,setupAuthentication:a};return s}angular.module("app.core").factory("userData",n),n.$inject=["$cookies","config","common"]}(),function(){"use strict";function n(n,r){function e(e,o,t){r.error(e,t),n.error("Error: "+e,o)}function o(e,o,t){r.info(e,t),n.info("Info: "+e,o)}function t(e,o,t){r.success(e,t),n.info("Success: "+e,o)}function i(e,o,t){r.warning(e,t),n.warn("Warning: "+e,o)}var a={showToasts:!0,error:e,info:o,success:t,warning:i,log:n.log};return a}angular.module("blocks.logger").factory("logger",n),n.$inject=["$log","toastr"]}(),function(){"use strict";function n(){this.config={appErrorPrefix:void 0},this.configure=function(n){this.config.appErrorPrefix=n},this.$get=function(){return{config:this.config}}}function r(n){n.decorator("$exceptionHandler",e)}function e(n,r,e){return function(o,t){var i=r.config.appErrorPrefix||"",a={exception:o,cause:t};o.message=i+o.message,n(o,t),e.error(o.message,a)}}angular.module("blocks.exception").provider("exceptionHandler",n).config(r),r.$inject=["$provide"],e.$inject=["$delegate","exceptionHandler","logger"]}(),function(){"use strict";function n(n){function r(r){return function(e){n.error(r,e)}}var e={catcher:r};return e}angular.module("blocks.exception").factory("exception",n),n.$inject=["logger"]}(),function(){"use strict";function n(){this.config={},this.$get=function(){return{config:this.config}}}function r(n,r,e){function o(){i(),a(),s()}function t(n){n.forEach(function(n){n.config.resolve=angular.extend(n.config.resolve||{},e.config.resolveAlways),l.state(n.name,n.config)}),d.otherwise("/")}function i(){n.$rootScope.$on("$stateChangeError",function(r,e,o,t,i,a){if(!u){c.errors++,u=!0;var s=e&&(e.name||e.templateUrl)||"unknown target",l="Error routing to "+s+". "+(a||"");n.logger.warning(l,[e]),n.logger.log(a.stack),n.$location.path("/")}})}function a(){n.$rootScope.$on("$stateChangeSuccess",function(n,r,e,o,t){console.log("routeChangeSuccess"),c.changes++})}function s(){n.$rootScope.$on("$stateChangeStart",function(e,o,t,i,a){r.isAuthenticated()||"login"===o.name||(e.preventDefault(),n.$state.go("login"))})}var u=!1,c={errors:0,changes:0},l=e.config.$routeProvider,d=e.config.$urlRouterProvider,g={configureRoutes:t,routeCounts:c};return o(),g}angular.module("blocks.router").provider("routehelperConfig",n).factory("routehelper",r),r.$inject=["common","permissions","routehelperConfig"]}(),angular.module("app.core").run(["$templateCache",function(n){n.put("app/authentication/login.html",'<div class="container login" ng-controller="Login">\r\n\r\n\r\n  <div id="bg-overlay" class="bg-img img-balloon"></div>\r\n\r\n  <div class="logo-container">\r\n    <img src="assets/img/authentication/kpmg-logo.png">\r\n  </div>\r\n  <!-- /logo-container -->\r\n\r\n  <div class="cls-content">\r\n    <div class="cls-content-sm panel">\r\n      <div class="panel-body" ng-if="!forgot">\r\n        <p class="pad-btm">\r\n\r\n        <h3>Log into {{locale.product_title}}</h3>\r\n        </p>\r\n        <form class="form-signin" role="form" ng-submit="handleLoginSubmit(creds)">\r\n          <div class="form-group">\r\n            <div class="input-group">\r\n              <div class="input-group-addon">\r\n                <i class="fa fa-user"></i>\r\n              </div>\r\n              <input id="usernameInput" type="email" class="form-control" placeholder="Email address" required autofocus ng-model="creds.username">\r\n\r\n            </div>\r\n          </div>\r\n          <div class="form-group">\r\n            <div class="input-group">\r\n              <div class="input-group-addon">\r\n                <i class="fa fa-key"></i>\r\n              </div>\r\n              <input type="password" autocomplete="off" class="form-control" placeholder="Password" required ng-model="creds.password">\r\n\r\n            </div>\r\n          </div>\r\n          <div class="row">\r\n            <div class="col-xs-8 checkbox">\r\n              <label for="remember_me_checkbox">Remember me</label>\r\n              <input id="remember_me_checkbox" type="checkbox" value="remember-me">\r\n            </div>\r\n            <div class="col-xs-4">\r\n              <div class="form-group text-right">\r\n                <button class="btn btn-success text-uppercase" ng-disabled="isDisabled" type="submit">Sign In</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="row">\r\n            <div class="col-xs-6">\r\n              <div class="form-group">\r\n                <a class="pointer" ng-click="showForget(true)">Forgot your password?</a>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="label-danger" ng-show="error_message != null" style="padding:10px;border-radius:3px;color:white">\r\n            {{error_message}}\r\n          </div>\r\n        </form>\r\n\r\n      </div>\r\n      <div id="request-forget-password" class="panel-body" ng-if="forgot" ng-controller="ForgotPasswordCtrl">\r\n        <p class="pad-btm">\r\n\r\n        <h3>Forget Password</h3>\r\n        </p>\r\n        <form class="form-signin" role="form" ng-show="!done" ng-submit="forgotPassword()">\r\n          <div class="form-group">\r\n            <div class="input-group">\r\n              <div class="input-group-addon">\r\n                <i class="fa fa-user"></i>\r\n              </div>\r\n              <input type="email" class="form-control" placeholder="Email address" required autofocus ng-model="user.user_primary_email">\r\n\r\n            </div>\r\n          </div>\r\n          <div class="label-danger" ng-show="error_msg != null">{{error_msg}}</div>\r\n          <div class="row">\r\n            <div class="col-xs-8 text-left">\r\n              <button class="btn btn-warning text-uppercase" type="button" ng-click="showForget(false)" ng-disabled="form_disable">Cancel\r\n              </button>\r\n            </div>\r\n            <div class="col-xs-4">\r\n              <div class="form-group text-right">\r\n                <button class="btn btn-success text-uppercase" type="submit" ng-disabled="form_disable">Submit</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n        </form>\r\n        <div ng-show="done">\r\n          <p>Email has been sent check your mailbox for further instructions</p>\r\n\r\n          <div class="row">\r\n            <div class="col-xs-12 text-right">\r\n              <button class="btn btn-success text-uppercase" type="button" ng-click="showForget(false)">OK</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n\r\n</div>'),n.put("app/layout/dashboard.html","<p>Welcome to Customer Compass</p>")}]);